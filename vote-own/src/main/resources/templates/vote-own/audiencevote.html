<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet">
    <title>观众投票详细界面</title>
</head>
<body>
<div class="container-fluid">

    <!--  头部LOGO-->
    <div class="container" style="padding-bottom: 50px">
        <div class="row">
            <div class="col-md-4">
                <img th:src="@{/img/LOGO.png}" class="img-responsive" alt="Responsive image">
            </div>
            <div class="col-md-6 pt-5">
                <img th:src="@{/img/audiencevote.png}" class="img-responsive" alt="Responsive image" style="height: 120px">
            </div>
        </div>
    </div>
    <!--    PK部分-->
    <div class="row" style="padding: 0 10%" th:each="item : ${pages.list}">
        <!--    选手A-->
        <div class="col-sm-6 col-md-4">
            <div class="thumbnail">
                <img alt="Bootstrap Image Preview"  th:src="@{/img/plays1.png}"/>
                <div class="caption">

                    <div class="row">
                        <div class="col-md-2">
                            <input type="text" readOnly="true" class="form-control" value="选手姓名：" style="width: 80px"/>
                        </div>
                        <div class="col-md-10">
                            <input th:value="${item.aName}" type="text" class="form-control " readOnly="true"
                                   style="width: 100%;display:inline-block;"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">
                            <input type="text" readOnly="true" class="form-control" value="歌唱曲目："
                                   style="margin-top: 10px;width: 80px"/>
                        </div>
                        <div class="col-md-10">
                            <input th:value="${item.aTitle}" type="text" class="form-control " readOnly="true"
                                   style="margin-top: 10px;width: 100%;display:inline-block;"/>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px">
                        <div class="col-md-12 container">
                            <p><button class="btn btn-primary btn-block" id="voteA" role="button">投他一票</button></p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-md-3 container" style="display: flex;justify-content: center;align-items: center;flex-wrap: wrap">
            <div class="row" >
                <!--        PK图片-->
                <img alt="Bootstrap Image Preview" th:src="@{/img/vs.png}" >
            </div>

            <div class="row" style="width: 100%;height: 25%;display: flex;justify-content: center;align-items: center;flex-wrap: wrap;font-size: 15px">
                <div class="text-success">开始时间:<span th:text="${#dates.format(item.beginTime,'yyyy-MM-dd HH:mm:ss')}"></span></div>

                <div class="text-danger">结束时间:<span th:text="${#dates.format(item.endTime,'yyyy-MM-dd HH:mm:ss')}"></span></div>
            </div>
        </div>

        <!--选手B-->
        <div class="col-sm-6 col-md-4">
            <div class="thumbnail">
                <img alt="Bootstrap Image Preview"  th:src="@{/img/plays1.png}"/>
                <div class="caption">

                    <div class="row">
                        <div class="col-md-2">
                            <input type="text" readOnly="true" class="form-control" value="选手姓名：" style="width: 80px"/>
                        </div>
                        <div class="col-md-10">
                            <input th:value="${item.bName}" type="text" class="form-control " readOnly="true"
                                   style="width: 100%;display:inline-block;"/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">
                            <input type="text" readOnly="true" class="form-control" value="歌唱曲目："
                                   style="margin-top: 10px;width: 80px"/>
                        </div>
                        <div class="col-md-10">
                            <input th:value="${item.bTitle}" type="text" class="form-control " readOnly="true"
                                   style="margin-top: 10px;width: 100%;display:inline-block;"/>
                        </div>
                    </div>

                    <div class="row" style="margin-top: 10px">
                        <div class="col-md-12 container">
                            <p><button class="btn btn-primary btn-block" id="voteB" role="button">投他一票</button></p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <!--    上一场or下一场-->
    <div class="row" style="padding-top: 10px">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <div class="row">
                <div class="col-md-3"></div>

                <div class="col-md-4">
                    <a class="btn btn-primary btn-pre" role="button" th:href="@{/votPage/{pageNum}/{matchId}/{raceSchedule}(pageNum = ${pages.prePage},matchId = ${matchId},raceSchedule = ${raceSchedule})}">上一页</a>
                    <span style="visibility: hidden" id="preValue" name="matchId" th:text="${pages.prePage}"></span>
                </div>
                <div class="col-md-5">
                    <a class="btn btn-primary btn-next" role="button" th:href="@{/votPage/{pageNum}/{matchId}/{raceSchedule}(pageNum = ${pages.nextPage},matchId = ${matchId},raceSchedule = ${raceSchedule})}">下一页</a>
                    <span style="visibility: hidden" id="nextValue" name="matchId" th:text="${pages.nextPage}"></span>
                </div>

            </div>
        </div>
        <div class="col-md-4"></div>
    </div>
</div>


</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="@/static/ruoyi/js/ry-ui.js" th:src="@{/ruoyi/js/ry-ui.js?v=4.7.4}"></script>

<script>
    $(document).ready(function (){
        var pagePreNum = $("#preValue").text();
        var pageNextNum = $("#nextValue").text();

        var matchId = [[${matchId}]];
        var raceSchedule = [[${raceSchedule}]];
        var aId = [[${pages.list[0].aId}]];
        var bId = [[${pages.list[0].bId}]];
        var sessionId = [[${pages.list[0].id}]];

        console.log(pagePreNum);
        console.log(pageNextNum);
        if(pagePreNum == 0){
            $(".btn-pre").addClass("disabled");
        }
        if(pageNextNum == 0){
            $(".btn-next").addClass("disabled");
        }

        $("#voteA").click(function () {
            $.ajax({
                type: "post",
                url: "/vote",
                data: {
                    "matchId": matchId,
                    "raceSchedule": raceSchedule,
                    "sessionId": sessionId,
                    "playerId": aId
                },
                success: function(r) {
                    $.modal.alert(r.msg);
                },
            });
        });

        $("#voteB").click(function () {
            $.ajax({
                type: "post",
                url: "/vote",
                data: {
                    "matchId": matchId,
                    "raceSchedule": raceSchedule,
                    "sessionId": sessionId,
                    "playerId": bId
                },
                success: function(r) {
                    $.modal.alert(r.msg);
                },
            });
        });
    })
</script>

</html>
